/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */ var objectToString=Object.prototype.toString,isArray=Array.isArray||function e(t){return"[object Array]"===objectToString.call(t)};function isFunction(e){return"function"==typeof e}function typeStr(e){return isArray(e)?"array":typeof e}function escapeRegExp(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(e,t){return null!=e&&"object"==typeof e&&t in e}function primitiveHasOwnProperty(e,t){return null!=e&&"object"!=typeof e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var regExpTest=RegExp.prototype.test;function testRegExp(e,t){return regExpTest.call(e,t)}var nonSpaceRe=/\S/;function isWhitespace(e){return!testRegExp(nonSpaceRe,e)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(e){return String(e).replace(/[&<>"'`=\/]/g,function e(t){return entityMap[t]})}var whiteRe=/\s*/,spaceRe=/\s+/,equalsRe=/\s*=/,curlyRe=/\s*\}/,tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(e,t){if(!e)return[];var r,n,i,s,a,o,c,u,p,h=!1,l=[],f=[],d=[],v=!1,g=!1,y="",$=0;function m(){if(v&&!g)for(;d.length;)delete f[d.pop()];else d=[];v=!1,g=!1}function w(e){if("string"==typeof e&&(e=e.split(spaceRe,2)),!isArray(e)||2!==e.length)throw Error("Invalid tags: "+e);r=RegExp(escapeRegExp(e[0])+"\\s*"),n=RegExp("\\s*"+escapeRegExp(e[1])),i=RegExp("\\s*"+escapeRegExp("}"+e[1]))}w(t||mustache.tags);for(var x=new Scanner(e);!x.eos();){if(s=x.pos,o=x.scanUntil(r))for(var _=0,k=o.length;_<k;++_)isWhitespace(c=o.charAt(_))?(d.push(f.length),y+=c):(g=!0,h=!0,y+=" "),f.push(["text",c,s,s+1]),s+=1,"\n"===c&&(m(),y="",$=0,h=!1);if(!x.scan(r))break;if(v=!0,a=x.scan(tagRe)||"name",x.scan(whiteRe),"="===a?(o=x.scanUntil(equalsRe),x.scan(equalsRe),x.scanUntil(n)):"{"===a?(o=x.scanUntil(i),x.scan(curlyRe),x.scanUntil(n),a="&"):o=x.scanUntil(n),!x.scan(n))throw Error("Unclosed tag at "+x.pos);if(u=">"==a?[a,o,s,x.pos,y,$,h]:[a,o,s,x.pos],$++,f.push(u),"#"===a||"^"===a)l.push(u);else if("/"===a){if(!(p=l.pop()))throw Error('Unopened section "'+o+'" at '+s);if(p[1]!==o)throw Error('Unclosed section "'+p[1]+'" at '+s)}else"name"===a||"{"===a||"&"===a?g=!0:"="===a&&w(o)}if(m(),p=l.pop())throw Error('Unclosed section "'+p[1]+'" at '+x.pos);return nestTokens(squashTokens(f))}function squashTokens(e){for(var t,r,n=[],i=0,s=e.length;i<s;++i)(t=e[i])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}function nestTokens(e){for(var t,r,n=[],i=n,s=[],a=0,o=e.length;a<o;++a)switch((t=e[a])[0]){case"#":case"^":i.push(t),s.push(t),i=t[4]=[];break;case"/":(r=s.pop())[5]=t[2],i=s.length>0?s[s.length-1][4]:n;break;default:i.push(t)}return n}function Scanner(e){this.string=e,this.tail=e,this.pos=0}function Context(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function Writer(){this.cache={}}Scanner.prototype.eos=function e(){return""===this.tail},Scanner.prototype.scan=function e(t){var r=this.tail.match(t);if(!r||0!==r.index)return"";var n=r[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},Scanner.prototype.scanUntil=function e(t){var r,n=this.tail.search(t);switch(n){case -1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=r.length,r},Context.prototype.push=function e(t){return new Context(t,this)},Context.prototype.lookup=function e(t){var r=this.cache;if(r.hasOwnProperty(t))n=r[t];else{for(var n,i,s,a,o=this,c=!1;o;){if(t.indexOf(".")>0)for(i=o.view,s=t.split("."),a=0;null!=i&&a<s.length;)a===s.length-1&&(c=hasProperty(i,s[a])||primitiveHasOwnProperty(i,s[a])),i=i[s[a++]];else i=o.view[t],c=hasProperty(o.view,t);if(c){n=i;break}o=o.parent}r[t]=n}return isFunction(n)&&(n=n.call(this.view)),n},Writer.prototype.clearCache=function e(){this.cache={}},Writer.prototype.parse=function e(t,r){var n=this.cache,i=t+":"+(r||mustache.tags).join(":"),s=n[i];return null==s&&(s=n[i]=parseTemplate(t,r)),s},Writer.prototype.render=function e(t,r,n,i){var s=this.parse(t,i),a=r instanceof Context?r:new Context(r,void 0);return this.renderTokens(s,a,n,t,i)},Writer.prototype.renderTokens=function e(t,r,n,i,s){for(var a,o,c,u="",p=0,h=t.length;p<h;++p)c=void 0,"#"===(o=(a=t[p])[0])?c=this.renderSection(a,r,n,i):"^"===o?c=this.renderInverted(a,r,n,i):">"===o?c=this.renderPartial(a,r,n,s):"&"===o?c=this.unescapedValue(a,r):"name"===o?c=this.escapedValue(a,r):"text"===o&&(c=this.rawValue(a)),void 0!==c&&(u+=c);return u},Writer.prototype.renderSection=function e(t,r,n,i){var s=this,a="",o=r.lookup(t[1]);if(o){if(isArray(o))for(var c=0,u=o.length;c<u;++c)a+=this.renderTokens(t[4],r.push(o[c]),n,i);else if("object"==typeof o||"string"==typeof o||"number"==typeof o)a+=this.renderTokens(t[4],r.push(o),n,i);else if(isFunction(o)){if("string"!=typeof i)throw Error("Cannot use higher-order sections without the original template");null!=(o=o.call(r.view,i.slice(t[3],t[5]),function e(t){return s.render(t,r,n)}))&&(a+=o)}else a+=this.renderTokens(t[4],r,n,i);return a}},Writer.prototype.renderInverted=function e(t,r,n,i){var s=r.lookup(t[1]);if(!s||isArray(s)&&0===s.length)return this.renderTokens(t[4],r,n,i)},Writer.prototype.indentPartial=function e(t,r,n){for(var i=r.replace(/[^ \t]/g,""),s=t.split("\n"),a=0;a<s.length;a++)s[a].length&&(a>0||!n)&&(s[a]=i+s[a]);return s.join("\n")},Writer.prototype.renderPartial=function e(t,r,n,i){if(n){var s=isFunction(n)?n(t[1]):n[t[1]];if(null!=s){var a=t[6],o=t[5],c=t[4],u=s;return 0==o&&c&&(u=this.indentPartial(s,c,a)),this.renderTokens(this.parse(u,i),r,n,u)}}},Writer.prototype.unescapedValue=function e(t,r){var n=r.lookup(t[1]);if(null!=n)return n},Writer.prototype.escapedValue=function e(t,r){var n=r.lookup(t[1]);if(null!=n)return mustache.escape(n)},Writer.prototype.rawValue=function e(t){return t[1]};var mustache={name:"mustache.js",version:"3.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,to_html:void 0,Scanner:void 0,Context:void 0,Writer:void 0},defaultWriter=new Writer;mustache.clearCache=function e(){return defaultWriter.clearCache()},mustache.parse=function e(t,r){return defaultWriter.parse(t,r)},mustache.render=function e(t,r,n,i){if("string"!=typeof t)throw TypeError('Invalid template! Template should be a "string" but "'+typeStr(t)+'" was given as the first argument for mustache#render(template, view, partials)');return defaultWriter.render(t,r,n,i)},mustache.to_html=function e(t,r,n,i){var s=mustache.render(t,r,n);if(!isFunction(i))return s;i(s)},mustache.escape=escapeHtml,mustache.Scanner=Scanner,mustache.Context=Context,mustache.Writer=Writer;export default mustache;