/* eslint-disable */ 
import{FranklinBlock,smartCaptureTags}from"../../scripts/lib-franklin.js";export default class CollectionCarousel extends FranklinBlock{beforeBlockRender(){const{slotOneItems:e,slotTwoItems:l,scrollable:o}=this.config;this.inputData.scrollable=o,this.inputData.slotOneItems=e.map(((l,o)=>({item:l,label:`Slide ${o+1} of ${e.length}`,id:`slide-${o+1}`}))),this.inputData.slotTwoItems=l?.map(((e,o)=>({item:e,label:`Slide ${o+1} of ${l.length}`,id:`slide-${o+1}`}))),this.inputData.totalSlides=e.length;const c=this.config.visibleItemsCount??3;this.block.style.setProperty("--core-collection-carousel--max-visible-items",c);const t=this.config.partialItemPercentage??0;this.block.style.setProperty("--core-collection--partial-item-width-percentage",t)}navigate(e,l){let o=l;const c=this.inputData.slotOneItems.length,t=getComputedStyle(e).getPropertyValue("--fully-visible-items"),s=this.block.querySelectorAll(".core-collection-carousel-navigation-item");s.forEach((e=>e.classList.remove("core-collection-carousel-navigation-item-active")));s[o].classList.add("core-collection-carousel-navigation-item-active"),o>c-t&&(o=c-t),e.style.setProperty("--active-item-index",o);e.querySelectorAll(".core-collection-carousel-carousel").forEach((e=>{e.classList.toggle("core-collection-carousel-start",0===o),e.classList.toggle("core-collection-carousel-end",o>=s.length-t)}))}handleTouch(){let e=0,l=0;const o=o=>{l=o.changedTouches[0].screenX;const c=this.block.querySelectorAll(".core-collection-carousel-navigation-item"),t=this.block.querySelector(".core-collection-carousel-navigation-item-active"),s=Array.from(c).indexOf(t);l<e-50&&this.navigate(this.block,Math.min(s+1,c.length-1)),l>e+50&&this.navigate(this.block,Math.max(s-1,0))},c=this.block.querySelector(".core-collection-carousel-carousel");c.addEventListener("touchstart",(l=>(l=>{e=l.changedTouches[0].screenX})(l))),c.addEventListener("touchend",(e=>o(e)))}addListeners(){this.block.querySelectorAll(".core-collection-carousel-navigation-item").forEach(((e,l)=>{e.addEventListener("click",(()=>this.navigate(this.block,l)))}))}fallbackOverflowScroll(){this.block.classList.add("scrollable-fallback-js")}isBrowserTouch(e){const l=this.block?.classList?.contains("core-collection-carousel");return l?Boolean(e&&e?.maxTouchPoints>0):(console.error("Block reference not found"),!1)}isFirefoxBrowser(e){const l=this.block?.classList?.contains("core-collection-carousel");return l?Boolean(e&&e?.userAgent.toLowerCase().indexOf("firefox")>-1):(console.error("Block reference not found"),!1)}async initScollbar(){if(!this.block)return;this.fallbackOverflowScroll()}async afterBlockRender(){this.initScollbar(),smartCaptureTags([{smName:"carousel-wrapper"},{selector:".core-collection-carousel-navigation-item",smName:"carousel-item",event:"click"}],this.block),this.inputData?.scrollable||(this.addListeners(),this.navigate(this.block,0)),this.inputData.scrollable||this.handleTouch(),this.config.fullWidth&&this.block.classList.add("full-width"),this.block.classList.add("block-padding-standard"),this.block.classList.add("block-padding-desktop-y-0"),this.block.classList.add("block-padding-mobile-y-0")}}export const schema='{\n  "collection-carousel": {\n    "name": "collection-carousel",\n    "description": "This is the collection-carousel block.",\n    "schema": {\n      "classes": []\n    }\n  }\n}\n';export const template=' {{ #scrollable}}\n<div class="core-collection-carousel-inside block-inside scrollable">\n  {{ /scrollable}}\n  {{ ^scrollable}}\n  <div class="core-collection-carousel-inside block-inside">\n    {{ /scrollable}}\n\n    {{#heading}}\n    <div class="core-collection-carousel-heading">\n      <h2>{{ heading }}</h2>\n    </div>\n    {{/heading}}\n\n    <div class="core-collection-carousel-parent">\n      <div class="core-collection-carousel-carousel">\n        {{ #slotOneItems }}\n        <div class="core-collection-carousel-item"\n          role="group"\n          aria-roledescription="slide"\n          aria-label="{{ label }}"\n          id="{{ id }}"\n        >\n          {{ item }}\n        </div>\n        {{ /slotOneItems }}\n      </div>\n      <div class="core-collection-carousel-navigation">\n        {{ #slotOneItems }}\n        <div role="button" class="core-collection-carousel-navigation-item" aria-labelledby="{{ id }}"></div>\n        {{/slotOneItems}}\n      </div>\n      <div class="core-collection-carousel-scrollbar-parent">\n        <div class="core-collection-carousel-scrollbar">\n          <div>  {{! scrollbar }}  </div>\n        </div>\n      </div>\n      <div class="core-collection-carousel-carousel core-collection-carousel-carousel-disclaimer">\n        {{ #slotTwoItems }}\n        <div class="core-collection-carousel-disclaimer core-collection-carousel-item"\n          role="group"\n          aria-roledescription="slide"\n          aria-label="{{ label }}"\n          id="{{ id }}"\n        >\n          {{ item }}\n        </div>\n        {{ /slotTwoItems }}\n      </div>\n    </div>\n  </div>\n</div>\n';export const smartCaptureConfig=" {}";