/* eslint-disable */ 
import{FranklinBlock,decorateButtons}from"../../scripts/lib-franklin.js";const testForMediaMatch=async(t,n,e)=>{if("picture"===t){if(!n.querySelector("img"))throw new Error(`Missing image match: ${n?.parentElement} ${e}`);return!1}if("icon"===t){if(!n.querySelector("span.icon"))throw new Error(`Missing icon match: ${n?.parentElement} ${e}`);return!1}return!0},validateCardType=async(t,n)=>{switch(t){case"text-only":testForMediaMatch("text-only",n,t);break;case"image":case"splitter":await testForMediaMatch("picture",n,t);break;case"icon":await testForMediaMatch("icon",n,t);break;case"eyebrow":case"number":await testForMediaMatch("number",n,t);break;default:console.error("Card case not matched: ",n,t)}},truncateText=(t,n,e=!0)=>t.length>n?e?`${t.substring(0,n)}...`:t.substring(0,n):t,updateCharacterLength=(t,n)=>{const e=t;if(!e?.heading||!e?.body)return;e.heading=e.heading.replace(/<(h[2-4])([^>]*)>(.*?)<\/\1>/g,((t,n,e,a)=>{if(!t)return t;return`<${n}${e}>${truncateText(a,60,!1)}</${n}>`})),e.body.startsWith("<p>")&&(e.body=e.body.substring(3,e.body.length-4));const a=e.body.replace(/<\/?[^>]+(>|$)/g,"");if(a.length>130){const t=e.body.length-a.length;e.body=truncateText(e.body,130+t,!0)}!t.variantButtonIcon&&e?.ctaLink&&(e.ctaLink=truncateText(e.ctaLink,30,!0)),"eyebrow"===n&&(e.cardIdentifier=e.cardIdentifier.replace(/<(h[2-4]|p)([^>]*)>(.*?)<\/\1>/g,((t,n,e,a)=>{if(!t)return t;if(a.length>30){return`<${n}${e}>${truncateText(a,30,!1)}</${n}>`}return`<${n}${e}>${a}</${n}>`}))),"number"===n&&(e.cardIdentifier=e.cardIdentifier.replace(/<(h[2-4]|p)([^>]*)>(.*?)<\/\1>/g,((t,n,e,a)=>{if(!t)return t;if(a.length>6){return`<${n}${e}>${truncateText(a,6,!1)}</${n}>`}return`<${n}${e}>${a}</${n}>`}))),"splitter"!==n&&e.ctaLink?.length>20&&(e.ctaLink=truncateText(e.ctaLink,20))};export default class Card extends FranklinBlock{variants=[{name:"image",test:this.block.classList.contains("image")&&!this.block.classList.contains("splitter")},{name:"icon",test:this.block.classList.contains("icon")},{name:"eyebrow",test:this.block.classList.contains("eyebrow")},{name:"number",test:this.block.classList.contains("number")},{name:"splitter",test:this.block.classList.contains("splitter")},{name:"text-only",test:!0}];async beforeBlockRender(){const t=this.block?.parentElement;t?.classList.contains("core-collection-carousel-item")&&(this.block.classList.add("collection-carousel-card"),this.inputData.isCarouselCard=!0);if(this.findSectionContent("disclaimer")&&this.inputData?.isCarouselCard&&(this.block?.classList.add("dynamic-with-disclaimer"),this.inputData.dynamicDisclaimerPosition=!0),this.inputData.cta)if("splitter"===this.variant){const t=document.createElement("div");t.innerHTML=this.inputData.cta,decorateButtons(t),this.inputData.ctas=t.innerHTML}else{const t=document.createElement("div");t.innerHTML=this.inputData.cta;const n=t.querySelector("a");n&&(this.inputData.ctaHref=n.href,this.inputData.ctaLink=n.textContent.trim())}"text-only"===this.variant&&this.block.classList.add("text-only"),"number"!==this.variant&&"eyebrow"!==this.variant||(this.inputData.cardIdentifier=this.inputData.cardIdentifier.replace(/^(?!<p>)(.*?)(?!<\/p>)$/gm,"<p>$1</p>"));try{const{inputData:t,variant:n,block:e}=this;await validateCardType(n,e);const a=this.block.classList.contains("button-link-icon");this.inputData.variantButtonIcon=a,updateCharacterLength(t,n)}catch(t){console.error("Error validating card type",this.block),this.inputData=null}}async htmlMarkupUpdates(){try{const{variant:t,block:n}=this;n.querySelectorAll(".core-cards-top").forEach((n=>{n?.firstElementChild&&n.firstElementChild.classList.add(`top-${t}`)}))}catch(t){console.error("Error adjusting card type",this.block)}}async afterBlockRender(){await this.htmlMarkupUpdates()}}export const schema='{\n  "card": {\n    "type": "Cards",\n    "description": "This is a Cards block description",\n    "schema": {\n      "classes": ["image", "button-link-icon", "icon", "number", "eyebrow", "text", "splitter"],\n      "cardIdentifier": {\n        "selector": "selectRow:card_identifier",\n        "target": "innerHTML",\n        "optional": true\n      },\n      "heading": {\n        "selector": "selectRow:heading",\n        "target": "innerHTML"\n      },\n      "body": {\n        "selector": "selectRow:body",\n        "target": "innerHTML",\n        "optional": true\n      },\n      "cta": {\n        "selector": "selectRow:cta",\n        "target": "innerHTML",\n        "optional": true\n      },\n      "disclaimer": {\n        "selector": "selectRow:disclaimer",\n        "target": "innerHTML",\n        "optional": true\n      }\n    }\n  }\n}\n';export const template=' <div\n  class="core-card-inside block-inside {{#isCarouselCard}}section-carousel-card{{/isCarouselCard}} {{#dynamicDisclaimerPosition}}core-card-dynamic-carousel{{/dynamicDisclaimerPosition}}"\n>\n  <div class="core-card-card core-card-content">\n    {{! the cardIdentifier can be: image | icon | number | eyebrow }}\n    {{#cardIdentifier}}\n    <div class="core-card-top">\n      {{ cardIdentifier }}\n    </div>\n    {{/cardIdentifier}}\n\n    <div class="core-card-bottom standard-block-content-spacing core-card-bottom-stretch">\n      <div>\n        {{ heading }}\n        <p>{{ body }}</p>\n      </div>\n      {{ #ctaHref }}\n      <p class="button-container" data-button-icon="{{ variantButtonIcon }}">\n        <a href="{{ ctaHref }}" title="{{ ctaLink }}" class="button secondary {{#variantButtonIcon}}button-icon{{/variantButtonIcon}}">\n          {{#variantButtonIcon}}\n          <span class="icon icon-lib-chevron-right"></span>\n          {{/variantButtonIcon}}\n          {{^variantButtonIcon}}\n          <span> {{ ctaLink }} </span>\n          {{/variantButtonIcon}}\n        </a>\n      </p>\n      {{ /ctaHref }}\n      {{ #ctas }}\n      {{ . }}\n      {{ /ctas }}\n    </div>\n  </div>\n\n  {{#dynamicDisclaimerPosition}}\n  {{#disclaimer}}\n  <div class="core-card-disclaimer-field atoms-disclaimer">\n    {{ disclaimer }}\n  </div>\n  {{/disclaimer}}\n  {{/dynamicDisclaimerPosition}}\n</div>\n';export const smartCaptureConfig=" {}";