/* eslint-disable */ 
import{FranklinBlock}from"../../scripts/lib-franklin.js";const buildBreadcrumbs=(e,t)=>{if(!e.startsWith("/"))return console.error("currentUrl must start with /"),[];const r=[],n=e.split("/").filter((e=>e));let a="";return n.forEach(((e,o)=>{a+=`/${e}`;const c=t.find((e=>e?.pathname===`${a}/`));c?r.push(c):o===n.length-1&&r.push({text:e.replace(/-/g," "),url:a})})),r.unshift({text:"Home",pathname:"/",title:"Home"}),r},buildBreadcrumbsHtml=e=>{const t=document.createElement("ol"),r=e.length-1;e.forEach(((e,n)=>{const a=document.createElement("li"),o=document.createElement("a");o.textContent=e?.text,o.href=e?.pathname,n===r&&(o.removeAttribute("href"),o.setAttribute("aria-current","page")),a.appendChild(o),t.appendChild(a)}));return String(t.outerHTML)};function buildBreadcrumbsFromNavTree(e){const t=new URL(window.location.href),r=window.location.host,n=t?.pathname,a=Array.from(e.querySelectorAll("ul li > a")).map((e=>({text:e.textContent.trim(),pathname:new URL(e.href).pathname,title:e.title||"",host:new URL(e.href).host}))).filter((e=>e.host===r)).map((({text:e,pathname:t,title:r})=>({text:e,pathname:t,title:r}))),o=a.find((e=>e.pathname===n)),c=buildBreadcrumbs(o.pathname,a);return!c||c.length<2?(console.error("minimum of 2 crumbs required"),!1):buildBreadcrumbsHtml(c)}function waitForElement(e){return new Promise((t=>{new MutationObserver(((r,n)=>{const a=document.querySelector(e);a&&(t(a),n.disconnect())})).observe(document,{childList:!0,subtree:!0})}))}export default class Bread extends FranklinBlock{beforeBlockDataRead(){this.block.parentNode.style.display="none"}async afterBlockRender(){await waitForElement(".core-header nav .header-top-menu.core-nav-sections"),this.block.parentNode.style.display="";const e=document.querySelector(".core-header nav .header-top-menu.core-nav-sections");this.block.innerHTML=`<h3>Breadcrumbs</h3> <div>${buildBreadcrumbsFromNavTree(e,document.location.href)}</div>`}}export const schema='{\n  "breadcrumb-poc": {\n    "name": "Breadcrumb POC",\n    "description": "I am test",\n    "schema": {}\n  }\n}\n';export const template='   <div class="breadcrumb-poc-content-wrapper">\n    <div class="test">\n      <div>  </div>\n    </div>\n  </div>';export const smartCaptureConfig=" {}";