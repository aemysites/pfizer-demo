/* eslint-disable */ 
import{FranklinBlock,loadScript}from"../../scripts/lib-franklin.js";export default class Embed extends FranklinBlock{variants=[{name:"youtube",test:this.block.querySelector("a[href*='youtube']")||this.block.querySelector("a[href*='youtu.be']")},{name:"micrsoft-stream",test:this.block.querySelector("a[href*='assets.digitalpfizer']")},{name:"vimeo",test:this.block.querySelector("a[href*='vimeo']")},{name:"twitter",test:this.block.querySelector("a[href*='twitter']")},{name:"interactive-js",test:this.block.querySelector("a[href*='interactive.digitalpfizer']")&&this.block.querySelector("a[href*='embed.js']")},{name:"interactive-html",test:this.block.querySelector("a[href*='interactive.digitalpfizer']")&&this.block.querySelector("a[href*='.html']")},{name:"webfiles-digitalpfizer-js",test:this.block.querySelector("a[href*='webfiles.digitalpfizer']")&&this.block.querySelector("a[href*='embed.js']")},{name:"webfiles-digitalpfizer-html",test:this.block.querySelector("a[href*='webfiles.digitalpfizer']")&&this.block.querySelector("a[href*='.html']")},{name:"default",test:!0}];static youtubeEmbedUrl=(e,t)=>{const i=new URLSearchParams(e.search),l=t?"&muted=1&autoplay=1":"";let n=i.get("v")?encodeURIComponent(i.get("v")):"";return e.origin.includes("youtu.be")&&([,n]=e.pathname.split("/")),`https://www.youtube.com${n?`/embed/${n}?rel=0&v=${n}${l}`:e.pathname}`};static vimeoEmbedUrl=(e,t)=>{const[,i]=e.pathname.split("/");return`https://player.vimeo.com/video/${i}${t?"?muted=1&autoplay=1":""}`};beforeBlockRender(){const e=new URL(this.inputData.embedUrl),t=[{embed:Embed.youtubeEmbedUrl,type:"youtube"},{embed:Embed.vimeoEmbedUrl,type:"vimeo"},{type:"twitter"}].find((e=>e.type===this.variant));let i;this.block.classList.contains("autoplay")&&(i=!0);const l=t&&t.embed?t.embed(e,i??!!this.inputData.poster):e.href,{hostname:n}=e;this.inputData={poster:this.inputData.poster,autoplay:i,[this.variant]:{embedUrl:l,hostname:n}}}loadEmbedScript(e){const t=document.createElement("script");t.src=e,t.setAttribute("type","text/javascript"),this.block.append(t)}afterBlockRender(){const e=this.block.firstElementChild;if(this.inputData.poster){const t=this.block.querySelector(".embed-placeholder");t?.addEventListener("click",(()=>{t.style.display="none",e.style.display="block"}))}else{const t=new IntersectionObserver((i=>{i.some((e=>e.isIntersecting))&&(t.disconnect(),e&&(e.style.display="block"))}));t.observe(this.block)}this.inputData.twitter&&loadScript("https://platform.twitter.com/widgets.js"),this.inputData["interactive-js"]&&this.loadEmbedScript(this.inputData["interactive-js"].embedUrl),this.inputData["webfiles-digitalpfizer-js"]&&this.loadEmbedScript(this.inputData["webfiles-digitalpfizer-js"].embedUrl),this.block.classList.add("block-padding-desktop-0"),this.block.classList.add("block-padding-mobile-0")}}export const schema='{\n  "embed": {\n    "type": "embed",\n    "description": "This is an embed block description",\n    "schema": {\n      "classes": ["autoplay"],\n      "embedUrl": {\n        "selector": ":scope a",\n        "target": "href"\n      },\n      "poster": {\n        "selector": ":scope picture",\n        "target": "outerHTML",\n        "optional": true\n      }\n    }\n  }\n}\n';export const template=' {{#youtube}}\n  <div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%; display: none">\n    <iframe src="{{ embedUrl }}" style="border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute"\n      allow="autoplay; fullscreen; picture-in-picture; encrypted-media; accelerometer; gyroscope; picture-in-picture"\n      scrolling="no" title="Content from Youtube" loading="lazy"></iframe>\n  </div>\n{{/youtube}}\n\n{{#vimeo}}\n  <div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%; display: none">\n    <iframe src="{{ embedUrl }}" style="border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute"\n      frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen title="Content from Vimeo"\n      loading="lazy"></iframe>\n  </div>\n{{/vimeo}}\n\n{{#twitter}}\n  <blockquote class="twitter-tweet" style="display: none"><a href="{{ embedUrl }}"></a></blockquote>\n{{/twitter}}\n\n{{#interactive-html}}\n  <div class="webfiles-embed-wrapper"\n    style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%; display: none">\n    <iframe src="{{ embedUrl }}" style="border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;"\n      allowfullscreen="" scrolling="yes" allow="encrypted-media" title="Content from {{ hostName }}" loading="lazy">\n    </iframe>\n  </div>\n{{/interactive-html}}\n\n{{ #webfiles-digitalpfizer-html }}\n<div class="webfiles-embed-wrapper" style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%; display: none">\n  <iframe scrolling="no" src="{{ embedUrl }}" class="flourish-embed-iframe" title=\'Interactive or visual content\'\n    frameborder=\'0\' style=\'width:100%;height:600px;\'></iframe>\n</div>\n{{ /webfiles-digitalpfizer-html }}\n\n{{#default}}\n  <div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%; display: none">\n    <iframe src="{{ embedUrl }}" style="border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute"\n      allowfullscreen="" scrolling="no" allow="encrypted-media" title="Content from {{ hostname }}" loading="lazy">\n    </iframe>\n  </div>\n{{/default}}\n\n{{#poster}}\n  <div class="embed-placeholder">\n    {{ poster }}\n    <div class="embed-placeholder-play">\n      <button type="button" title="Play">\n        <span class="icon icon-lib-mat-play-arrow"></span>\n      </button>\n    </div>\n  </div>\n{{/poster}}';export const smartCaptureConfig=" {}";