/* eslint-disable */ 
import{FranklinBlock,overlayHostInstance,platformFetchPage,decorateSections,decorateBlocks,decorateDefaultContent,loadBlock}from"../../scripts/lib-franklin.js";const loadForm=async e=>{const t=await platformFetchPage("form",e);if(!t)return console.error("Failed to load form HTML for specified overlay form: ",e),null;const o=document.createElement("div");o.innerHTML=t,decorateSections(o),decorateDefaultContent(o),decorateBlocks(o);const{blockInstance:n,loadBlockPromise:r}=await loadBlock(o.querySelector(".core-form"),null,{});return await r,n.block};export default class Overlay extends FranklinBlock{variants=[{name:"basic",test:!0}];formPromise;async beforeBlockDataRead(){return this.block}async beforeBlockRender(){this.inputData={[this.variant]:this.inputData};const e=this.inputData?.basic?.form;e&&(this.formPromise=loadForm(e))}popupOverlay(){const{content:e}=this.block.querySelector("template");if(!e)return void console.error("No content found in overlay block");const t=e.querySelector(".atoms-headline").outerHTML,o=e.querySelector(".body")?.outerHTML||"",n=e.querySelector(".footer").innerHTML,r=e.querySelector(".after-scroll")?.innerHTML??"";this.block.classList.contains("full")&&overlayHostInstance().block.classList.add("full","core-overlay-host-full");const c=overlayHostInstance();if(c.setContentHTML({headlineHTML:t,bodyHTML:o,footerHTML:n,afterScrollHTML:r}),this.formBlock){this.formBlock.firstChild.id="form-in-overlay";const e=this.formBlock.querySelector("button.submit");e.title=e.textContent,e.setAttribute("form","form-in-overlay"),c.block.querySelector(".core-overlay-host-after-scroll").append(e),c.block.querySelector(".core-overlay-host-body").append(this.formBlock)}c.open()}async afterBlockRender(){this.block.querySelector(".button").addEventListener("click",this.popupOverlay.bind(this)),this.formPromise&&(this.formBlock=await this.formPromise)}}export const schema='{\n  "overlay": {\n    "description": "This is the Overlay block description",\n    "schema": {\n      "classes": [],\n      "contentAtoms": true,\n      "label": {\n        "selector": "selectRow:label",\n        "target": "textContent"\n      },\n      "accept": {\n        "selector": "selectRow:accept",\n        "target": "textContent",\n        "optional": true\n      },\n      "decline": {\n        "selector": "selectRow:decline",\n        "target": "textContent",\n        "optional": true\n      },\n      "submit": {\n        "selector": "selectRow:submit",\n        "target": "textContent",\n        "optional": true\n      },\n      "form": {\n        "selector": "selectRow:form",\n        "target": "textContent",\n        "optional": true\n      }\n    }\n  }\n}\n';export const template=' {{#basic}}\n  <p class="button-container">\n    <a href="#" title="{{ basic.label }}" class="button primary"><span>{{ basic.label }}</span></a>\n  </p>\n  <template>\n    {{ basic.contentAtoms.headline }}\n\n    <div class="body">\n      {{ basic.contentAtoms.content }}\n\n      <div class="atoms-buttons">\n        {{ #accept }}\n          <a href="#" title="{{ accept }}" class="button primary">\n           {{ accept }}\n          </a>\n        {{ /accept }}\n\n        {{ #decline }}\n          <a href="#" title="{{ decline }}" class="button secondary core-overlay-host-decline">\n            {{ decline }}\n          </a>\n        {{ /decline }}\n      </div>\n    </div>\n\n    <div class="footer">\n      {{ basic.contentAtoms.disclaimer }}\n    </div>\n\n    {{#form}}\n      <div class="after-scroll"></div>\n    {{/form}}\n  </template>\n{{/basic}}\n\n';export const smartCaptureConfig=" {}";