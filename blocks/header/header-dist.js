/* eslint-disable */ 
import{FranklinBlock,fetchPlaceholders,decorateButtons,loadLanguageSelector,platformFetchPage,throttle,trapTabAccessibilityFocus}from"../../scripts/lib-franklin.js";export default class Header extends FranklinBlock{bottomLinks=null;topLinks=null;async beforeBlockDataRead(){const t=await platformFetchPage("header","/global/nav");if(!t)return void console.error("No nav found");document.querySelector(".core-header-wrapper").classList.add("core-header"),this.block.innerHTML=t;this.block.querySelectorAll(":scope > div > div > div").forEach((t=>{const e=Header.getSectionName(t);e?(t.classList.add(`section-${e}`),t.removeChild(t.firstElementChild)):console.warn("Header section name not found")}));const e=this.block.querySelector(".section-hide-on-mobile"),n=e?.querySelectorAll("div")[1];if(n){this.hideOnMobile=[];n.innerHTML.trim().split(",").forEach((t=>{const e=t.trim().toLowerCase();this.hideOnMobile.push(e)}))}decorateButtons(this.block),Header.addSpansToL1ifL2sExist(),this.bottomLinks=document.querySelector(".section-dropdown-bottom > div > p"),this.topLinks=document.querySelector(".section-dropdown-top > div > p")}static getSectionName(t){return(t.firstElementChild?.textContent.split("(")[0]??"").toLowerCase()}static getTextContentWithoutChildren(t){return[...t.childNodes].reduce(((t,e)=>3===e.nodeType?t+e.textContent:t),"")}static toggleAllSections=async(t,e=!1)=>{t.forEach((t=>{t.querySelectorAll(".core-nav-sections > ul > li.core-nav-drop").forEach((t=>{t.setAttribute("aria-expanded",e)}))}))};static isDesktop=window.matchMedia("(min-width: 1100px)");static toggleMenu(t,e=null){const n=document.querySelector(".header-nav-wrapper"),o=null!==e?!e:"true"===n.getAttribute("data-expanded");document.body.style.overflowY=o||Header.isDesktop.matches?"":"hidden",n.setAttribute("data-expanded",!o),document.querySelector(".core-header-wrapper")?.classList.toggle("expanded",!o),document.querySelector(".header-nav-right-content .hva")?.classList.toggle("inverted",!o),document.querySelector(".core-language-selector")?.classList.toggle("inverted",!o),(o||Header.isDesktop.matches)&&n.removeAttribute("height");const a=t.querySelectorAll(".core-nav-drop");Header.toggleAllSections(a,o||!Header.isDesktop.matches);const i=n.querySelector(".core-nav-hamburger button");i.setAttribute("aria-label",o?"Open Navigation Menu":"Close Navigation Menu"),i.setAttribute("aria-expanded",String(!o)),i.setAttribute("data-smartcapture","menu-hamburger"),i.setAttribute("data-smartcapture-event","click"),document.body.classList.toggle("header-navigation-open",!o);document.querySelector(".header-expanded-position-toggle").classList.toggle("hidden",o)}static toggleItem(t,e){const n="true"===t.getAttribute("aria-expanded");Header.toggleAllSections(e),t.setAttribute("aria-expanded",!n);const o=String(!n);t.setAttribute("aria-label",o)}static resetPopups(t){t.stopPropagation(),document.getElementById("dropdown-top-links-content").style.display="none",document.getElementById("dropdown-bottom-links-content").style.display="none",document.getElementById("dropdown-top-links-button").setAttribute("aria-expanded",!1),document.getElementById("dropdown-top-links-button").setAttribute("aria-label","Open Popup"),document.getElementById("dropdown-bottom-links-button").setAttribute("aria-expanded",!1),document.getElementById("dropdown-bottom-links-button").setAttribute("aria-label","Open Popup")}static handlePopupLinks(t,e){const n=document.getElementById(t);n.addEventListener("click",(t=>{const o=document.getElementById(e),a="block"===o.style.display,i=a?"none":"block";Header.resetPopups(t),o.style.display=i,n.setAttribute("aria-expanded",!a),n.setAttribute("aria-label",a?"Open Popup":"Close Popup")}))}static trapFocus(){const t=document.querySelector(".core-nav-hamburger button"),e=document.querySelector(".header-nav-wrapper");let n=null;const o=async()=>{window.innerWidth<1024&&"true"===t.getAttribute("aria-expanded")?(n&&n(),n=await trapTabAccessibilityFocus(e,["a","button"])):n&&(n(),n=null)};t.addEventListener("click",(()=>setTimeout(o,1e3))),window.addEventListener("resize",throttle((()=>{Header.toggleMenu(e,!1),o()}),1e3)),o()}static openPopupsWithEnterKey(){const t=[];t.push(document.getElementById("dropdown-top-links-button")),t.push(document.getElementById("dropdown-bottom-links-button")),t.forEach((t=>{t.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.click()),"Escape"===e.key&&Header.resetPopups(e)}))}))}static addClickHandlersForMobileAccordionLabels(){document.querySelectorAll(".mobile-menu-accordion-labels").forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault();const n="true"===t.getAttribute("aria-expanded");t.setAttribute("aria-expanded",!n),t.nextElementSibling.style.setProperty("display",n?"none":"block","important");const o=t.querySelector(".dropdown-label-icon");o&&(o.style.transition="transform 0.3s",o.style.transform=n?"rotate(0)":"rotate(0.5turn)")}))}))}static addFlexLayoutIfNeeded(){const t=document.querySelector(".top"),e=document.querySelector(".container");t.offsetHeight<200&&e.classList.add("flex-layout")}manageSingleVsMultipleBottomLinks(){if(!this.bottomLinks){document.querySelector("#dropdown-bottom-links-button").style.display="none"}}manageSingleVsMultipleTopLinks(){if(!this.topLinks){document.querySelector("#dropdown-top-links-button").style.display="none"}}async afterBlockRender(){this.inputData.splitterButton||this.block.querySelector(".button-wrapper").classList.add("single-button-wrapper");this.block.querySelectorAll(".button-wrapper .header-expanded-right-buttons a").forEach((t=>{t.classList.add("inverted")})),this.hideOnMobile&&this.hideOnMobile.forEach((t=>{const e=document.querySelector(`.${t}-component`);e?.classList.add("hide-on-mobile")})),"header"===this.block.parentElement.tagName.toLowerCase()&&this.block.parentElement.classList.add("global-layout-full-viewport"),Header.addClickHandlersForMobileAccordionLabels(),Header.openPopupsWithEnterKey(),this.manageSingleVsMultipleBottomLinks(),this.manageSingleVsMultipleTopLinks();const t=this.block.querySelector(".header-expanded-position-toggle"),e=document.querySelector("header");e&&e.appendChild(t);const n=this.block.querySelectorAll(".core-nav-drop");n.forEach((e=>{e.addEventListener("click",(()=>{const o=document.querySelector("nav").getAttribute("aria-expanded");t.style.display="true"===o?"block":"none",Header.toggleItem(e,n)})),e.addEventListener("keydown",(t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),Header.toggleItem(e,n))}))}));this.block.querySelector(".core-nav-hamburger button").addEventListener("click",(()=>Header.toggleMenu(this.block))),Header.toggleMenu(this.block,!1);this.block.querySelectorAll(".core-nav-drop, .popup-links").forEach((t=>{t.hasAttribute("tabindex")||(t.setAttribute("role","button"),t.setAttribute("tabindex",0),t.setAttribute("aria-expanded",!1),t.setAttribute("aria-label","false"))})),Header.trapFocus(),Header.handlePopupLinks("dropdown-top-links-button","dropdown-top-links-content"),Header.handlePopupLinks("dropdown-bottom-links-button","dropdown-bottom-links-content");const{showHeaderLanguageSelector:o}=await fetchPlaceholders("");if("true"===o){const t=this.block.querySelector(".language-selector-container"),e=await loadLanguageSelector(t);e&&e.setPopupPosition("bottom-right")}document.addEventListener("keydown",(t=>{if("Escape"===t.key){"true"===document.querySelector(".header-nav-wrapper").getAttribute("aria-expanded")&&Header.toggleMenu(this.block)}}))}static addSpansToL1ifL2sExist(){const t=document.querySelectorAll(".section-top-menu div > ul > li");document.querySelectorAll(".section-top-menu div > ul > li > ul > li").length&&t.length&&t.forEach((t=>{const e=t.childNodes[0]?.nodeValue?.trim();if(!e)return;const n=document.createElement("span");n.textContent=e,t.childNodes[0].nodeValue="",t.insertBefore(n,t.firstChild)}))}}export const schema='{\n  "header": {\n    "schema": {\n      "classes": [],\n      "socialSection": {\n        "optional": true,\n        "linkItemCollection": {\n          "type": "multiple",\n          "subTarget": ".section-social-icons ul > li",\n          "optional": true,\n          "items": {\n            "href": {\n              "selector": ":scope > a",\n              "target": "href"\n            },\n            "iconClass": {\n              "selector": ":scope > a > span",\n              "target": "className"\n            }\n          }\n        }\n      },\n      "rightButtonHref": {\n        "selector": ".section-button-right a",\n        "target": "href",\n        "optional": true\n      },\n      "rightButtonLink": {\n        "selector": ".section-button-right a",\n        "target": "textContent",\n        "optional": true\n      },\n      "leftButtonIcon": {\n        "selector": ".section-button-left a span",\n        "target": "className",\n        "optional": true\n      },\n      "rightButtonIcon": {\n        "selector": ".section-button-right a span",\n        "target": "className",\n        "optional": true\n      },\n      "leftButtonHref": {\n        "selector": ".section-button-left a",\n        "target": "href",\n        "optional": true\n      },\n      "leftButtonLink": {\n        "selector": ".section-button-left a",\n        "target": "textContent",\n        "optional": true\n      },\n      "splitterButton": {\n        "selector": ".section-splitter-button a",\n        "target": "outerHTML",\n        "optional": true\n      },\n      "bottomDropdownTop": {\n        "selector": ".section-button-right a",\n        "target": "href",\n        "optional": true\n      },\n      "bottomRightLinksCollection": {\n        "type": "multiple",\n        "description": "This is a collection of links on the bottom right of the menu.",\n        "subTarget": ".section-bottom-right-links ul li",\n        "optional": true,\n        "items": {\n          "label": {\n            "selector": "a",\n            "target": "textContent"\n          },\n          "href": {\n            "selector": "a",\n            "target": "href"\n          }\n        }\n      },\n      "onlyOneBottomLink": {\n        "selector": ".section-dropdown-bottom > div > a",\n        "target": "outerHTML",\n        "optional": true\n      },\n      "onlyOneTopLink": {\n        "selector": ".section-dropdown-top > div > a",\n        "target": "outerHTML",\n        "optional": true\n      },\n      "dropdownTop": {\n        "selector": ".section-dropdown-top p",\n        "target": "textContent",\n        "optional": true\n      },\n      "dropdownBottom": {\n        "selector": ".section-dropdown-bottom p",\n        "target": "textContent",\n        "optional": true\n      },\n      "primaryLogoClass": {\n        "selector": ".section-logo a span.icon",\n        "target": "className"\n      },\n      "primaryLogoClassReversed": {\n        "selector": ".section-logo-reversed a span.icon",\n        "target": "className"\n      },\n      "dropdownTopLinksCollection": {\n        "type": "multiple",\n        "description": "This is a collection of dropdown menu items at the top of the bottom of the menu",\n        "subTarget": ".section-dropdown-top ul > li",\n        "optional": true,\n        "items": {\n          "href": {\n            "selector": "a",\n            "target": "href"\n          },\n          "label": {\n            "selector": "a",\n            "target": "textContent"\n          }\n        }\n      },\n      "dropdownBottomLinksCollection": {\n        "type": "multiple",\n        "description": "This is a collection of dropdown menu items at the bottom of the bottom of the menu",\n        "subTarget": ".section-dropdown-bottom ul > li",\n        "optional": true,\n        "items": {\n          "href": {\n            "selector": "a",\n            "target": "href"\n          },\n          "label": {\n            "selector": "a",\n            "target": "textContent"\n          }\n        }\n      },\n      "logoBottom": {\n        "selector": ".section-logo-bottom a span.icon",\n        "target": "className",\n        "optional": true\n      },\n      "topMenuItemCollection": {\n        "type": "multiple",\n        "description": "This is a collection of top-level menu items. Each top-level menu item has a list of sub-menu items.",\n        "subTarget": ".section-top-menu > div > ul > li",\n        "items": {\n          "multiPageVariantL1MenuLabels": {\n            "selector": "span",\n            "target": "outerHTML",\n            "optional": true\n          },\n          "staticVariantL1MenuLinks": {\n            "selector": "a",\n            "target": "outerHTML",\n            "optional": true\n          },\n          "multiPageMenuL2SubLinks": {\n            "selector": ":scope > ul",\n            "target": "outerHTML",\n            "optional": true\n          }\n        }\n      },\n      "hvaCta": {\n        "selector": ".section-hva-cta a",\n        "target": "outerHTML",\n        "description": "Header HVA CTA",\n        "optional": true\n      }\n    }\n  }\n}\n';export const template=' <a href="#main" tabindex="0" class="skip-content hidden button text button-m inverted button-container inverted-background">Skip to content</a>\n<div class="nav-area">\n  {{#primaryLogoClass}}\n    <a href="/" class="button-icon header-logo" aria-label="home">\n      <span class="section-logo {{ primaryLogoClass }}"></span>\n      <span class="section-logo-reversed {{ primaryLogoClassReversed }}"></span>\n    </a>\n  {{/primaryLogoClass}}\n  <nav data-expanded="false" class="header-nav-wrapper" aria-label="Site">\n    {{#regulatoryLinkCollection.length}}\n      <div class="core-nav-regulatory-links">\n        {{#regulatoryLinkCollection}}\n          <a href="{{ href }}" title="{{ text }}">{{ text }}</a>\n        {{/regulatoryLinkCollection}}\n      </div>\n    {{/regulatoryLinkCollection.length}}\n    <div class="header-nav-wrapper-menu">\n      <div class="header-nav-right-content">\n      <div class="hva-cta-component">{{hvaCta}}</div>\n        <div class="language-selector-container language-component"></div>\n        <div class="core-nav-hamburger button-examples-new">\n          <button class="button primary button-s button-icon" type="button" aria-label="Open navigation">\n            <span class="icon icon-lib-mat-menu-outlined open-menu"></span>\n            <span class="icon icon-lib-menu-close close-menu"></span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </nav>\n</div>\n\n<div class="header-expanded-position-toggle">\n  <div class="top-menu-nav">\n    <div class="divider divider-top"></div>\n    {{#topMenuItemCollection.length}}\n      <div class="menu-nested">\n        <ul class="desktop-menu">\n          {{#topMenuItemCollection}}\n            <li class="core-nav-drop"  tabindex="0" aria-expanded="false" aria-label="false">\n                {{#multiPageMenuL2SubLinks.length}}\n                    {{ multiPageVariantL1MenuLabels }}\n                    {{ multiPageMenuL2SubLinks }}\n                {{/multiPageMenuL2SubLinks.length}}\n\n                {{^multiPageMenuL2SubLinks.length}}\n                    {{ staticVariantL1MenuLinks }}\n                {{/multiPageMenuL2SubLinks.length}}\n            </li>\n          {{/topMenuItemCollection}}\n        </ul>\n\n        <ul class="mobile-menu">\n          {{#topMenuItemCollection}}\n            <li class="core-nav-drop" tabindex="0" aria-expanded="false" aria-label="false">\n                {{#multiPageMenuL2SubLinks.length}}\n                    <span class="mobile-menu-accordion-labels">\n                        {{ multiPageVariantL1MenuLabels }}\n                        <span class="icon icon-lib-mat-expand-more dropdown-label-icon"></span>\n                    </span>\n                    <span class="mobile-menu-accordion-content">{{ multiPageMenuL2SubLinks }}</span>\n                {{/multiPageMenuL2SubLinks.length}}\n\n                {{^multiPageMenuL2SubLinks.length}}\n                    {{ staticVariantL1MenuLinks }}\n                {{/multiPageMenuL2SubLinks.length}}\n            </li>\n          {{/topMenuItemCollection}}\n        </ul>\n      </div>\n    {{/topMenuItemCollection.length}}\n  </div>\n\n  <div class="spacer"></div>\n\n  <div class="button-section">\n    <div class="button-wrapper">\n      <div class="header-expanded-left-buttons">\n        {{#rightButtonLink}}\n          <a href="{{ rightButtonHref }}" title="{{ rightButtonLink }}" class="button-left button primary">\n            {{#rightButtonIcon}}\n              <span class="{{ rightButtonIcon }}"></span>\n            {{/rightButtonIcon}}\n            <span>{{ rightButtonLink }}</span>\n          </a>\n        {{/rightButtonLink}}\n\n        {{#leftButtonLink}}\n          <a href="{{ leftButtonHref }}" title="{{ leftButtonLink }}" class="button-right button primary">\n            {{#leftButtonIcon}}\n              <span class="{{ leftButtonIcon }}"></span>\n            {{/leftButtonIcon}}\n            <span>{{ leftButtonLink }}</span>\n          </a>\n        {{/leftButtonLink}}\n      </div>\n      <div class="header-expanded-right-buttons">\n        {{#splitterButton}}\n          {{splitterButton}}\n        {{/splitterButton}}\n      </div>\n    </div>\n    <div class="divider"></div>\n  </div>\n\n  <div class="menu-bottom-section">\n    <div class="menu-logo-and-links">\n     {{! shows reverse }}\n      {{#logoBottom}}\n        <a href="/" class="button-icon logo-bottom" aria-label="home">\n          <span class="logo-bottom-span {{ logoBottom }}"></span>\n        </a>\n      {{/logoBottom}}\n      {{#socialSection}}\n        <div class="core-footer-social">\n          {{#socialSection.linkItemCollection}}\n            <a href="{{ href }}"><span class="{{ iconClass }}"></span></a>\n          {{/socialSection.linkItemCollection}}\n        </div>\n      {{/socialSection}}\n    </div>\n\n    <div class="bottom-right-content">\n      <div class="bottom-right-dropdowns">\n        {{#onlyOneTopLink}}\n          <ul>\n            <li>\n              {{ onlyOneTopLink }}\n            </li>\n          </ul>\n        {{/onlyOneTopLink}}\n\n        <div id="dropdown-top-links-button" tabindex="0" aria-label="Open Popup">\n          <div class="dropdown-label">\n            <span>{{ dropdownTop }}</span>\n            <span class="icon icon-lib-mat-expand-more dropdown-label-icon"></span>\n          </div>\n          <div id="dropdown-top-links-content">\n            <div>\n              <ul>\n                {{#dropdownTopLinksCollection}}\n                  <li>\n                    <a href="{{ href }}">{{ label }}</a>\n                  </li>\n                {{/dropdownTopLinksCollection}}\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        {{#onlyOneBottomLink}}\n          <ul>\n            <li>\n              {{ onlyOneBottomLink }}\n            </li>\n          </ul>\n        {{/onlyOneBottomLink}}\n\n        <div id="dropdown-bottom-links-button" tabindex="0" aria-label="Open Popup">\n          <div class="dropdown-label">\n            <span>{{ dropdownBottom }}</span>\n            <span class="icon icon-lib-mat-expand-more dropdown-label-icon"></span>\n          </div>\n          <div id="dropdown-bottom-links-content">\n            <div>\n              <ul>\n                {{#dropdownBottomLinksCollection}}\n                  <li>\n                    <a href="{{ href }}">{{ label }}</a>\n                  </li>\n                {{/dropdownBottomLinksCollection}}\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <ul>\n        {{#bottomRightLinksCollection}}\n          <li class="core-nav-drop" tabindex="0">\n            <a href="{{ href }}">{{ label }}</a>\n          </li>\n        {{/bottomRightLinksCollection}}\n      </ul>\n    </div>\n  </div>\n</div>\n';export const smartCaptureConfig=' {\n  "smartcapture": []\n}\n';